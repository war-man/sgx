@using Common.Utilities;
@using ViewModels;
@model DanhGiaXCGViewModel;

@{
    ViewData["Title"] = "Đánh giá xe cơ giới";
    Layout = "~/Views/Shared/_LayoutData.cshtml";
}

<div class="card">
    <div class="card-body">
        <a href="/@Constants.LinkFactory.Main/@Constants.LinkFactory.DanhGiaXCG/@Constants.LinkFactory.Create"><i class="icon-add-to-list mr-1"></i> Nhập số liệu</a>
    </div>
</div>

<form method="get" action="/@Constants.LinkFactory.Main/@Constants.LinkFactory.DanhGiaXCG" id="form-main">
    <div class="form-row mb-3">
        <div class="col-md-6">
            <label class="control-label">Xe cơ giới/máy</label>
            <select asp-for="xm" class="form-control form-control-lg js-select2-basic-single">
                <option value="">Tất cả</option>
                @{
                    foreach (var item in Model.Vehicles)
                    {
                        <option value="@item.Alias">@item.Name</option>
                    }
                }
            </select>
        </div>
        <div class="col-md-6 col-xs-12">
            <label class="control-label">Công đoạn</label>
            <select asp-for="cd" class="form-control form-control-lg js-select2-basic-single">
                <option value="">Tất cả</option>
                @{
                    foreach (var item in Model.Stages)
                    {
                        <option value="@item.Alias">@item.Name</option>
                    }
                }
            </select>
        </div>
        <div class="col-md-2 col-xs-12">
            <label class="control-label">Xếp hạng</label>
            <select asp-for="rate" class="form-control form-control-lg">
                <option value="">Tất cả</option>
                <option value="A">A</option>
                <option value="A+">A+</option>
                <option value="A+_">A++</option>
                <option value="B">B</option>
                <option value="C">C</option>
            </select>
        </div>
        <div class="col-md-6 col-xs-12">
            <label class="control-label"><small>Bấm nút hoặc Enter</small></label>
            <button class="btn btn-lg btn-info form-control" type="submit"><i class="icon-magnifying-glass"></i> Tìm kiếm</button>
        </div>
    </div>
</form>

<div class="table-responsive">
    <table class="table table-sm table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th colspan="4">Công đoạn vận hành</th>
                <th colspan="4">Năng suất</th>
                <th colspan="4">Tiêu hao dầu</th>
                <th colspan="2">Vận hành</th>
                <th colspan="4">Chi phí</th>
                <th></th>
                <th></th>
            </tr>
            <tr>
                <th></th>
                <th>Chủng loại xe</th>
                <th>
                    Công việc
                </th>
                <th>
                    Thời gian làm việc
                </th>
                <th>
                    Số chuyến
                </th>
                <th>
                    Dầu
                </th>
                <th>
                    Trọng số đánh giá
                </th>
                <th>
                    Điểm công đoạn
                </th>
                <th>
                    Tỷ trọng công đoạn
                </th>
                <th>
                    Điểm đánh giá công đoạn
                </th>
                <th>
                    Trọng số đánh giá
                </th>
                <th>
                    Tiêu chuẩn công đoạn
                </th>
                <th>
                    Thực tế
                </th>
                <th>
                    Điểm đánh giá công đoạn
                </th>
                <th>
                    Trọng số đánh giá
                </th>
                <th>
                    Tiêu chuẩn công đoạn
                </th>
                <th>
                    Thực tế
                </th>
                <th>
                    Điểm đánh giá công đoạn
                </th>
                <th>
                    Điểm vận hành XCG		
                </th>
                <th>
                    Trọng số
                </th>
                <th>
                    Tiêu chuẩn
                </th>
                <th>
                    Thực tế
                </th>
                <th>
                    Điểm chi phí XCG
                </th>
                <th>
                    Trọng số
                </th>
                <th>
                    Đánh giá tổng thể
                </th>
                <th>
                    Xếp hạng XCG
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.List)
            {
            <tr>
                <td></td>
                <td>@item.ChungLoaiXe</td>
                <td>@item.CongViec</td>
                <td>@item.ThoiGianLamViec</td>
                <td>@item.Chuyen</td>
                <td>@item.Oil</td>
                <td>@item.CongDoanVanHanh.TrongSoDanhGia.ToString("G29")</td>
                <td>@item.CongDoanVanHanh.DiemCongDoan.ToString("G29")</td>
                <td>@item.CongDoanVanHanh.TiTrongCongDoan.ToString("#0.#%")</td>
                <td>@String.Format("{0:#,###,###.##}", item.CongDoanVanHanh.DiemDanhGiaCongDoan)</td>
                <td>@item.NangSuat.TrongSoDanhGia.ToString("G29")</td>
                <td>@item.NangSuat.TieuChuanCongDoan.ToString("G29")</td>
                <td>@String.Format("{0:#,###,###.##}", item.NangSuat.ThucTe)</td>
                <td>@item.NangSuat.DiemDanhGiaCongDoan.ToString("G29")</td>
                <td>@item.TieuHaoDau.TrongSoDanhGia.ToString("G29")</td>
                <td>@item.TieuHaoDau.TieuChuanCongDoan.ToString("G29")</td>
                <td>@String.Format("{0:#,###,###.##}", item.TieuHaoDau.ThucTe)</td>
                <td>@item.TieuHaoDau.DiemDanhGiaCongDoan.ToString("G29")</td>
                <td>@String.Format("{0:#,###,###.##}", item.VanHanh.DiemVanHanhXCG)</td>
                <td>@item.VanHanh.TrongSo.ToString("G29")</td>
                <td>@String.Format("{0:#,###,###}", item.ChiPhi.TieuChuan)</td>
                <td>@String.Format("{0:#,###,###}", item.ChiPhi.ThucTe)</td>
                <td>@String.Format("{0:#,###,###.##}", item.ChiPhi.DiemChiPhiXCG)</td>
                <td>@item.ChiPhi.TrongSo.ToString("G29")</td>
                <td>@String.Format("{0:#,###,###.##}", item.DanhGiaTongThe)</td>
                <td>@item.XepHangXCG</td>
            </tr>
            }
        </tbody>
    </table>
</div>

@section scripts {
    <script type="text/javascript" src="~/js/factory-danh-gia-xcg.js?@DateTime.Now.Ticks"></script>
}
