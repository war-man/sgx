@using Common.Utilities;
@using Common.Enums;
@model ViewModels.EmployeeDataViewModel

@{
    Layout = "~/Views/Shared/_LayoutSocialFb.cshtml";
    var i = 0;
    var login = User.Identity.Name;
    var loginUserName = User.Claims.Where(m => m.Type.Equals("UserName")).FirstOrDefault().Value;
    var rightSystem = false;
    var rightHr = false;
    var rightNhanSu = false;
    var rightLuongVP = false;
    var rightLuongNM = false;
    var rightLuongSX = false;
    var rightNhaMay = false;
    if (!string.IsNullOrEmpty(login))
    {
        rightSystem = Utility.IsRight(login, Constants.Rights.System, (int)ERights.View);
        rightHr = Utility.IsRight(login, Constants.Rights.HR, (int)ERights.Edit);
        rightNhanSu = Utility.IsRight(login, Constants.Rights.NhanSu, (int)ERights.Edit);
        rightLuongVP = Utility.IsRight(login, Constants.Rights.Luong, (int)ERights.Edit);
        rightLuongNM = Utility.IsRight(login, Constants.Rights.LuongNM, (int)ERights.Edit);
        rightLuongSX = Utility.IsRight(login, Constants.Rights.LuongSX, (int)ERights.Edit);
        rightNhaMay = Utility.IsRight(login, Constants.Rights.NhaMay, (int)ERights.View);
    }

    var readonlyMode = true;
    if (rightHr)
    {
        readonlyMode = false;
    }
}

<input type="hidden" value="@rightHr" class="right-hr" />
<input type="hidden" value="@rightNhanSu" class="right-nhan-su" />
<div class="main-container">
    <nav aria-label="breadcrumb" role="navigation" class="bg-primary text-white">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="/">Trang chủ</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="/@Constants.LinkHr.Main/@Constants.LinkHr.Human">Nhân sự</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">Cập nhật tài khoản @Model.Employee.FullName</li>
                    </ol>
                </div>
            </div>
        </div>
    </nav>

    <section class="bg-white space-sm pb-4">
        <div class="container">
            <div class="row justify-content-between align-items-center">
                <div class="col-auto">
                    <h1 class="h2">Chỉnh sửa thông tin</h1>
                </div>
            </div>
        </div>
    </section>
    <!-- MAIN -->
    <form class="data-form" asp-action="Edit" enctype="multipart/form-data">
        <input asp-for="Employee.Id" type="hidden" />
        <input asp-for="Employee.Code" type="hidden" />
        <input name="checkUserName" type="hidden" value="@Model.Employee.UserName" />
        <input name="checkEMail" type="hidden" value="@Model.Employee.Email" />
        <div class="container">
            <div class="row">
                @{
                    var avatarDisplay = Constants.System.domain + "/images/placeholder/120x120.png";
                    var coverDisplay = string.Empty;
                    var avatar = Model.Employee.Avatar;
                    var cover = Model.Employee.Cover;
                    var avatarChange = new Image();
                    var coverChange = new Image();
                    var avatarChangeFlag = false;
                    var coverChangeFlag = false;

                    var avatarPath1 = string.Empty;
                    var avatarName1 = string.Empty;
                    var avatarOrginal1 = string.Empty;
                    var coverPath1 = string.Empty;
                    var coverName1 = string.Empty;
                    var coverOrginal1 = string.Empty;
                    var avatarPath2 = string.Empty;
                    var avatarName2 = string.Empty;
                    var avatarOrginal2 = string.Empty;
                    var coverPath2 = string.Empty;
                    var coverName2 = string.Empty;
                    var coverOrginal2 = string.Empty;

                    if (avatar != null)
                    {
                        avatarPath1 = avatar.Path;
                        avatarName1 = avatar.FileName;
                        avatarOrginal1 = avatar.OrginalName;
                    }
                    if (cover != null)
                    {
                        coverPath1 = cover.Path;
                        coverName1 = cover.FileName;
                        coverOrginal1 = cover.OrginalName;
                    }

                    if (Model.StatusChange)
                    {
                        if (Model.EmployeeChance != null)
                        {
                            if (Model.EmployeeChance.Avatar != null)
                            {
                                avatarChange = Model.EmployeeChance.Avatar;
                                if (avatar == null)
                                {
                                    avatarChangeFlag = true;
                                    avatar = avatarChange;
                                }
                                else if (avatar != null && avatar.FileName != avatarChange.FileName)
                                {
                                    avatarChangeFlag = true;
                                    avatar = avatarChange;
                                }
                                avatarPath2 = avatarChange.Path;
                                avatarName2 = avatarChange.FileName;
                                avatarOrginal2 = avatarChange.OrginalName;

                                avatar = avatarChange;
                            }

                            if (Model.EmployeeChance.Cover != null)
                            {
                                coverChange = Model.EmployeeChance.Cover;
                                if (cover == null)
                                {
                                    coverChangeFlag = true;
                                    cover = coverChange;
                                }
                                else if (cover != null && cover.FileName != coverChange.FileName)
                                {
                                    coverChangeFlag = true;
                                    cover = coverChange;
                                }
                                coverPath2 = coverChange.Path;
                                coverName2 = coverChange.FileName;
                                coverOrginal2 = coverChange.OrginalName;
                            }
                        }
                    }

                    if (avatar != null)
                    {
                        avatarDisplay = Url.Content(avatar.Path) + Url.Content(avatar.FileName);
                    }
                    if (cover != null)
                    {
                        var pathCover = Url.Content(Constants.System.domain + cover.Path + cover.FileName);
                        coverDisplay = "background-image: url(" + pathCover.Replace("\\", "/") + "); width:354px;height:167px";
                    }
                    if (avatar == null)
                    {
                        avatar = new Image();
                    }
                    if (cover == null)
                    {
                        cover = new Image();
                    }
                }
                <input id="avatar-path-1" type="hidden" value="@avatarPath1" />
                <input id="avatar-name-1" type="hidden" value="@avatarName1" />
                <input id="avatar-orginal-1" type="hidden" value="@avatarOrginal1" />
                <input id="cover-path-1" type="hidden" value="@coverPath1" />
                <input id="cover-name-1" type="hidden" value="@coverName1" />
                <input id="cover-orginal-1" type="hidden" value="@coverOrginal1" />
                <input id="avatar-path-2" type="hidden" value="@avatarPath2" />
                <input id="avatar-name-2" type="hidden" value="@avatarName2" />
                <input id="avatar-orginal-2" type="hidden" value="@avatarOrginal2" />
                <input id="cover-path-2" type="hidden" value="@coverPath2" />
                <input id="cover-name-2" type="hidden" value="@coverName2" />
                <input id="cover-orginal-2" type="hidden" value="@coverOrginal2" />

                <input asp-for="Employee.Avatar.Path" type="hidden" value="@avatar.Path" />
                <input asp-for="Employee.Avatar.FileName" type="hidden" value="@avatar.FileName" />
                <input asp-for="Employee.Avatar.OrginalName" type="hidden" value="@avatar.OrginalName" />
                <input asp-for="Employee.Cover.Path" type="hidden" value="@cover.Path" />
                <input asp-for="Employee.Cover.FileName" type="hidden" value="@cover.FileName" />
                <input asp-for="Employee.Cover.OrginalName" type="hidden" value="@cover.OrginalName" />

                <div class="col-12" id="cover" style="@coverDisplay">
                    <div class="media flex-wrap mb-0 align-items-center" id="avatar-upload">
                        <img id="avatarShow" alt="@Model.Employee.FullName" src="@avatarDisplay" class="avatar avatar-lg mb-3 mb-md-0" />
                        <div class="media-body">
                            <label class="custom-file mb-2">
                                <input type="file" id="avatar-input" name="avatar" class="custom-file-input height-0" />
                                <span class="btn btn-primary"><i class="icon-upload-to-cloud">&nbsp;</i>Chọn hình</span>
                            </label>

                            <label class="custom-file mb-2">
                                <input type="file" id="cover-input" name="cover" class="custom-file-input height-0" />
                                <span class="btn btn-primary"><i class="icon-upload-to-cloud">&nbsp;</i>Chọn hình nền</span>
                            </label>
                            <div>
                                <small>
                                    Để có kết quả tốt nhất, hãy sử dụng hình ảnh có kích thước tối thiểu 256px x 256px ở định dạng .jpg hoặc .png
                                </small>
                            </div>
                            @if (rightNhanSu && avatarChangeFlag)
                            {
                                <div>
                                    <span class="badge">Hình đại diện</span>
                                    <small class="badge badge-danger badge-picture confirm-avatar-cancel"><i class="fas fa-ban"></i> Không xác nhận</small>
                                    @if (!string.IsNullOrEmpty(avatarName1))
                                    {
                                        <small class="badge badge-secondary badge-picture avatar-current"><i class="far fa-image"></i> Xem hiện tại</small>
                                    }
                                    <small class="badge badge-secondary badge-picture avatar-new d-none"><i class="fas fa-undo"></i> Lấy thay đổi</small>
                                </div>
                            }
                            @if (rightNhanSu && coverChangeFlag)
                            {
                                <div>
                                    <span class="badge">Hình nền</span>
                                    <small class="badge badge-info badge-picture confirm-cover-ok"><i class="far fa-check-circle"></i> Xác nhận</small>
                                    <small class="badge badge-danger badge-picture confirm-cover-cancel"><i class="far fa-check-circle"></i> Không xác nhận</small>
                                    <small class="badge badge-secondary badge-picture cover-current"><i class="far fa-image"></i> Xem hiện tại</small>
                                    <small class="badge badge-secondary badge-picture cover-new"><i class="fas fa-undo"></i> Xem thay đổi</small>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <hr />
            <div class="row mb-4">
                <div class="col">
                    <h5><i class="icon icon-info"></i>Thông tin</h5>
                </div>
            </div>

            <div class="row">
                <div class="col-12 col-md-4 order-md-2">
                    <div class="alert alert-info text-small" role="alert">
                        <i class="icon-shield"></i>
                        <span>
                            @*Your information is always kept encrypted and can never be accessed by third parties.*@
                            Thông tin của bạn luôn được mã hóa và không bao giờ cho các bên thứ ba truy cập.
                        </span>
                        <a href="/pp/chinh-sach-bao-mat">@*See our privacy policy*@Xem chính sách bảo mật của chúng tôi</a>
                    </div>
                </div>

                <div class="col-12 col-md-8 order-md-1">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <i class="icon icon-text"></i>
                                <label asp-for="Employee.FullName" class="control-label"></label><span class="text-red">*</span>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.FullName</span></p>
                                    <input asp-for="Employee.FullName" type="hidden" />
                                }
                                else
                                {
                                    <input asp-for="Employee.FullName" class="form-control form-control-lg" autofocus />
                                }
                                <span asp-validation-for="Employee.FullName" class="text-danger"></span>
                                <small>Thông tin này hiển thị trên hồ sơ công khai của bạn</small>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group">
                                <i class="icon icon-login"></i>
                                <label asp-for="Employee.UserName" class="control-label"></label><span class="text-red">*</span>
                                <p><span>@Model.Employee.UserName</span></p>
                                @*<input asp-for="Employee.UserName" class="form-control form-control-lg" readonly />*@
                                <small>Thông tin này hiển thị trên hồ sơ công khai của bạn</small>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group">
                                <i class="far fa-envelope"></i>
                                <label asp-for="Employee.Email" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    var email = string.IsNullOrEmpty(Model.Employee.Email) ? Constants.MissTitle : Model.Employee.Email;
                                    <p>@email</p>
                                    <input asp-for="Employee.Email" type="hidden" />
                                }
                                else
                                {
                                    <input asp-for="Employee.Email" class="form-control form-control-lg" autocomplete="off" />
                                    <span asp-validation-for="Employee.Email" class="text-danger"></span>
                                }
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-cake"></i>
                                <label asp-for="Employee.Birthday" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Birthday.ToString("dd/MM/yyyy")</span></p>
                                }
                                else
                                {
                                    <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.Birthday.ToString("dd/MM/yyyy")" />
                                }
                                <span asp-validation-for="Employee.Birthday" class="text-danger"></span>
                                <input type="hidden" name="Employee.Birthday" value="@Model.Employee.Birthday" class="form-control form-control-lg hidedatepicker datepicker-lg" />
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-select-arrows"></i>
                                <label asp-for="Employee.Gender" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Gender</span></p>
                                }
                                else
                                {
                                    <select asp-for="Employee.Gender" class="form-control form-control-lg">
                                        <option value="Nam">Nam</option>
                                        <option value="Nữ">Nữ</option>
                                        <option value="Khác">Khác</option>
                                    </select>
                                }
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-select-arrows"></i>
                                <label asp-for="Employee.Department" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Department</span></p>
                                }
                                else
                                {
                                    <div class="row">
                                        <div class="col-10">
                                            <select asp-for="Employee.Department" class="form-control form-control-lg">
                                                <option value="" selected>Chọn</option>
                                                @{
                                                    foreach (var item in ViewBag.Departments)
                                                    {
                                                        <option value="@item.Name">@item.Name</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                        <div class="col-2 align-middle">
                                            <button class="btn btn-sm btn-add-department" type="button" data-toggle="modal" data-target="#newDepartment" title="Tạo mới Phòng/ban">+</button>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-select-arrows"></i>
                                <label asp-for="Employee.Department" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Department</span></p>
                                }
                                else
                                {
                                    <div class="row">
                                        <div class="col-10">
                                            <select asp-for="Employee.Part" class="form-control form-control-lg">
                                                <option value="" selected>Chọn</option>
                                                @{
                                                    foreach (var item in ViewBag.Parts)
                                                    {
                                                        <option value="@item.Name">@item.Name</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                        <div class="col-2 align-middle">
                                            <button class="btn btn-sm btn-add-part" type="button" data-toggle="modal" data-target="#newPart" title="Tạo mới Bộ phận">+</button>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group">
                                <i class="icon icon-select-arrows"></i>
                                <label asp-for="Employee.Title" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Title</span></p>
                                }
                                else
                                {
                                    <div class="row">
                                        <div class="col-10">
                                            <select asp-for="Employee.SalaryChucVuViTriCode" class="form-control form-control-lg js-select2-basic-single">
                                                <option value="">Chọn</option>
                                                @{
                                                    foreach (var item in Model.ThangBangLuongs)
                                                    {
                                                        <option value="@item.ViTriCode" data-name="@item.ViTri">@item.ViTri [@item.ViTriCode]</option>
                                                    }
                                                }
                                            </select>
                                            <input type="hidden" asp-for="Employee.Title"/>
                                        </div>
                                        <div class="col-2 align-middle">
                                            <button class="btn btn-sm btn-add-title" type="button" data-toggle="modal" data-target="#newTitle" title="Tạo mới Công việc">+</button>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group">
                                <i class="icon icon-select-arrows"></i>
                                <label class="control-label">Người quản lý trực tiếp</label>
                                @if (readonlyMode)
                                {
                                    @if (Model.Employee != null && !string.IsNullOrEmpty(Model.Manager.FullName))
                                    {
                                        var managerDisplay = Model.Manager.FullName;
                                        if (!string.IsNullOrEmpty(Model.Manager.Title))
                                        {
                                            managerDisplay += " [" + Model.Manager.Title + "]";
                                        }
                                        <p>
                                            <span>
                                                @managerDisplay
                                            </span>
                                        </p>
                                    }

                                }
                                else
                                {
                                    <select name="Employee.ManagerId" id="ManagerId" class="form-control form-control-lg js-select2-basic-single">
                                        <option value="">Không có quản lý</option>
                                        @{
                                            foreach (var item in Model.Employees)
                                            {
                                                string displayTitle = string.Empty;
                                                if (!string.IsNullOrEmpty(item.Title))
                                                {
                                                    displayTitle += "[" + item.Title + "]";
                                                }
                                                <option value="@item.Id">@item.FullName @displayTitle</option>
                                            }
                                        }
                                    </select>
                                }

                                <input type="hidden" value="@Model.Employee.ManagerId" id="hidManagerId" />
                                <script id="tmplManagePeople" type="text/x-jsrender">
                                    <option value="{{:id}}">{{:fullName}} [{{:title}}]</option>
                                </script>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-time-slot"></i>
                                <label asp-for="Employee.Joinday" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.Joinday.ToString("dd/MM/yyyy")</span></p>
                                }
                                else
                                {
                                    <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.Joinday.ToString("dd/MM/yyyy")" />
                                    <span asp-validation-for="Employee.Joinday" class="text-danger"></span>
                                    <input type="hidden" name="Employee.Joinday" value="@Model.Employee.Joinday" class="form-control form-control-lg hidedatepicker datepicker-lg" />
                                }
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <i class="icon icon-archive"></i>
                                <label asp-for="Employee.LeaveLevelYear" class="control-label"></label>
                                @if (readonlyMode)
                                {
                                    <p><span>@Model.Employee.LeaveLevelYear</span></p>
                                }
                                else
                                {
                                    <select asp-for="Employee.LeaveLevelYear" class="form-control form-control-lg">
                                        <option value="12">12 ngày</option>
                                        <option value="14">14 ngày</option>
                                        <option value="16">16 ngày</option>
                                    </select>
                                }
                                <span asp-validation-for="Employee.LeaveLevelYear" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-6 workplace">
                            <div class="form-group">
                                <i class="icon icon-location"></i>
                                <label class="control-label">Nơi làm việc</label>
                            </div>
                        </div>
                        <div class="col-6">
                            <input type="hidden" asp-for="Employee.IsTimeKeeper" />
                            @{
                                var checkTimeKeeper = Model.Employee.IsTimeKeeper ? "checked" : string.Empty;
                                if (readonlyMode & Model.Employee.IsTimeKeeper)
                                {
                                    <p>Không tính thời gian làm việc</p>
                                }
                                else
                                {
                                    <div>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" @checkTimeKeeper id="check-timekeeper">
                                            <label class="custom-control-label text-small" for="check-timekeeper">
                                                Không tính thời gian làm việc
                                            </label>
                                        </div>
                                    </div>
                                }
                            }
                        </div>

                        @if (!readonlyMode)
                        {
                            <div class="col-12">
                                <h5><i class="icon icon-info"></i>Thông tin lương</h5>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="control-label">Khối</label>
                                    @{
                                        var khoivp = (int)ESalaryType.VP;
                                        var khoinm = (int)ESalaryType.NM;
                                        var khoisx = (int)ESalaryType.SX;
                                    }
                                    <select asp-for="Employee.SalaryType" class="form-control form-control-lg">
                                        <option value="">Chọn</option>
                                        <option value="@khoivp">Văn Phòng</option>
                                        <option value="@khoinm">Nhà Máy</option>
                                        <option value="@khoisx">Sản Xuất</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="control-label">Ngạch</label>
                                    <select asp-for="Employee.NgachLuong" class="form-control form-control-lg">
                                        <option value="">Chọn</option>
                                        @{
                                            foreach (var item in Model.NgachLuongs)
                                            {
                                        <option value="@item.MaSo">@item.ChucDanhCongViec [@item.MaSo]</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        }


                        @{
                            var dnoneTime = Model.Employee.IsTimeKeeper ? "d-none" : string.Empty;
                            if (readonlyMode && !Model.Employee.IsTimeKeeper)
                            {
                                if (Model.Employee.Workplaces != null && Model.Employee.Workplaces.Count > 0)
                                {
                                    foreach (var workplace in Model.Employee.Workplaces)
                                    {
                                        <div class="col-6 nodeWorkplace node dnoneTime">
                                            <div class="form-group">
                                                <span class="badge badge-primary">@workplace.Name</span>
                                                @if (!string.IsNullOrEmpty(workplace.Fingerprint))
                                                {
                                                    <p>
                                                        <i class="icon icon-fingerprint"></i>
                                                        <label class="control-label">Mã chấm công</label>
                                                        <span class="badge badge-info">@workplace.Fingerprint</span>
                                                    </p>
                                                    <p>
                                                        <i class="far fa-clock"></i>
                                                        <label class="control-label">Thời gian làm việc</label>
                                                        <span class="badge badge-info">@workplace.WorkingScheduleTime</span>
                                                    </p>
                                                }
                                            </div>
                                        </div>
                                    }
                                }
                            }
                            else
                            {
                                var fingerprint0 = string.Empty;
                                var fingerprint1 = string.Empty;
                                var time0 = string.Empty;
                                var time1 = string.Empty;
                                if (Model.Employee.Workplaces != null && Model.Employee.Workplaces.Count > 0)
                                {
                                    fingerprint0 = Model.Employee.Workplaces[0].Fingerprint;
                                    time0 = Model.Employee.Workplaces[0].WorkingScheduleTime;
                                    if (Model.Employee.Workplaces.Count > 1)
                                    {
                                        fingerprint1 = Model.Employee.Workplaces[1].Fingerprint;
                                        time1 = Model.Employee.Workplaces[1].WorkingScheduleTime;
                                    }
                                }
                                <div class="col-12 time-working dnoneTime">
                                    <div class="row">
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <span class="badge badge-primary">Nhà máy</span>
                                                <i class="icon icon-fingerprint"></i>
                                                <label class="control-label">Mã chấm công</label>
                                                <input value="@fingerprint0" name="Employee.Workplaces[0].Fingerprint" class="form-control form-control-lg" />
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <label class="control-label">Thời gian làm việc</label>
                                                <select name="Employee.Workplaces[0].WorkingScheduleTime" class="form-control form-control-lg">
                                                    @{
                                                        var workScheduleTime0 = new TimeSpan(7, 30, 0);
                                                        if (!string.IsNullOrEmpty(time0))
                                                        {
                                                            workScheduleTime0 = TimeSpan.Parse(time0.Split('-')[0]);
                                                        }
                                                        foreach (var workTimeType in ViewBag.WorkTimeTypes)
                                                        {
                                                            if (workTimeType.Start == workScheduleTime0)
                                                            {
                                                                <option value="@workTimeType.Start.ToString(@"hh\:mm")-@workTimeType.End.ToString(@"hh\:mm")" selected>@workTimeType.Start.ToString(@"hh\:mm") - @workTimeType.End.ToString(@"hh\:mm")</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@workTimeType.Start.ToString(@"hh\:mm")-@workTimeType.End.ToString(@"hh\:mm")">@workTimeType.Start.ToString(@"hh\:mm") - @workTimeType.End.ToString(@"hh\:mm")</option>

                                                            }
                                                        }
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                        <input type="hidden" class="employee-workplace-exist" name="Employee.Workplaces[0].Code" value="NM" />
                                        <input type="hidden" name="Employee.Workplaces[0].Name" value="Nhà máy" />
                                    </div>
                                </div>

                                <div class="col-12 time-working dnoneTime">
                                    <div class="row">
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <span class="badge badge-primary">Văn phòng</span>
                                                <i class="icon icon-fingerprint"></i>
                                                <label class="control-label">Mã chấm công</label>
                                                <input value="@fingerprint1" name="Employee.Workplaces[1].Fingerprint" class="form-control form-control-lg" />
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <label class="control-label">Thời gian làm việc</label>
                                                <select name="Employee.Workplaces[1].WorkingScheduleTime" class="form-control form-control-lg">
                                                    @{
                                                        var workScheduleTime1 = new TimeSpan(7, 30, 0);
                                                        if (!string.IsNullOrEmpty(time0))
                                                        {
                                                            workScheduleTime1 = TimeSpan.Parse(time0.Split('-')[0]);
                                                        }
                                                        foreach (var workTimeType in ViewBag.WorkTimeTypes)
                                                        {
                                                            if (workTimeType.Start == workScheduleTime1)
                                                            {
                                                                <option value="@workTimeType.Start.ToString(@"hh\:mm")-@workTimeType.End.ToString(@"hh\:mm")" selected>@workTimeType.Start.ToString(@"hh\:mm") - @workTimeType.End.ToString(@"hh\:mm")</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@workTimeType.Start.ToString(@"hh\:mm")-@workTimeType.End.ToString(@"hh\:mm")">@workTimeType.Start.ToString(@"hh\:mm") - @workTimeType.End.ToString(@"hh\:mm")</option>
                                                            }
                                                        }
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                        <input type="hidden" class="employee-workplace-exist" name="Employee.Workplaces[1].Code" value="VP" />
                                        <input type="hidden" name="Employee.Workplaces[1].Name" value="Văn phòng" />
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            @{
                var showFilter = "";
                var iconFilter = "icon-add-to-list";
                var textFilter = "Mở rộng";
                if (!rightHr)
                {
                    showFilter = "show";
                    iconFilter = "icon-list";
                    textFilter = "Thu gọn";
                }
            }

            <a class="nav-link custom-more collapsed" data-toggle="collapse" href="#more" aria-expanded="false" aria-controls="more">
                <i class="icon @iconFilter"></i> @textFilter
            </a>
        </div>
        <div class="row">
            <div id="more" class="col-12 collapse @showFilter">
                <!-- PERSONAL INFORMATION -->
                <div class="row mb-4">
                    <div class="col">
                        <h5>Thông tin cá nhân</h5>
                    </div>
                </div>
                <div class="row">
                    @if (!readonlyMode)
                    {
                        <div class="col-6">
                            <div>
                                <div class="custom-control custom-checkbox">
                                    @{
                                        var enableStatus = string.Empty;
                                        var displayLeave = "d-none";
                                        if (!Model.Employee.Enable)
                                        {
                                            enableStatus = "checked";
                                            displayLeave = "";
                                        }
                                    }

                                    <input type="checkbox" class="custom-control-input" @enableStatus id="check-enable">
                                    <label class="custom-control-label text-small" for="check-enable">
                                        Nghỉ việc
                                    </label>
                                    <input type="hidden" asp-for="Employee.Enable" />
                                </div>
                            </div>
                        </div>
                        <div class="col-6 leave-extend @displayLeave">
                            <div class="form-group">
                                <label asp-for="Employee.Leaveday" class="control-label"></label>
                                @{
                                    if (Model.Employee.Leaveday.HasValue)
                                    {
                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.Leaveday.Value.ToString("dd/MM/yyyy")" />
                                    }
                                    else
                                    {
                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                    }
                                }
                                <input type="hidden" name="Employee.Leaveday" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.Leaveday" />
                            </div>
                        </div>
                        <div class="col-12 leave-extend @displayLeave">
                            <div class="form-group">
                                <label asp-for="Employee.LeaveReason" class="control-label"></label>
                                <textarea asp-for="Employee.LeaveReason" class="form-control form-control-lg"></textarea>
                            </div>
                        </div>
                    }
                    <div class="col-6">
                        <div class="form-group">
                            <i class="icon icon-phone"></i>
                            <label asp-for="Employee.Tel" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.Tel" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.Tel != Model.EmployeeChance.Tel)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.Tel" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.Tel"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> <a href="tel:@Model.EmployeeChance.Tel">@Model.EmployeeChance.Tel</a></p>
                                    }
                                    else
                                    {
                                        <input asp-for="Employee.Tel" value="@Model.EmployeeChance.Tel" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> <a href="tel:@Model.Employee.Tel">@Model.Employee.Tel</a></p>
                                    }
                                }
                            }
                        </div>
                    </div>
                    @{
                        if (Model.Employee.Mobiles != null && Model.Employee.Mobiles.Count > 0)
                        {
                            int iMobile = 0;
                            var dnoneMobile = Model.Employee.Mobiles.Count == 1 ? "d-none" : string.Empty;
                            foreach (var mobile in Model.Employee.Mobiles)
                            {
                                if (!string.IsNullOrEmpty(mobile.Number))
                                {
                                    <div class="col-6 nodeMobile node">
                                        <div class="form-group">
                                            <i class="icon icon-phone"></i>
                                            <label class="control-label">Số điện thoại</label>
                                            @if (!Model.StatusChange)
                                            {
                                                <input name="Employee.Mobiles[@iMobile].Number" value="@mobile.Number" class="form-control form-control-lg" />
                                            }
                                            else
                                            {
                                                if (Model.EmployeeChance != null && Model.EmployeeChance.Mobiles != null && Model.EmployeeChance.Mobiles.Count > 0 && mobile.Number != Model.EmployeeChance.Mobiles[iMobile].Number)
                                                {
                                                    if (rightNhanSu)
                                                    {
                                                        <input name="Employee.Mobiles[@iMobile].Number" value="@mobile.Number" class="form-control form-control-lg" />
                                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.Mobiles[iMobile].Number"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> <a href="tel:@Model.EmployeeChance.Mobiles[iMobile].Number">@Model.EmployeeChance.Mobiles[iMobile].Number</a></p>
                                                    }
                                                    else
                                                    {
                                                        <input name="Employee.Mobiles[@iMobile].Number" value="@Model.EmployeeChance.Mobiles[iMobile].Number" class="form-control form-control-lg" />
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> <a href="tel:@mobile.Number">@mobile.Number</a></p>
                                                    }
                                                }
                                            }
                                            @if (iMobile != 0)
                                            {
                                                <button type="button" class="btn btn-link btn-sm @dnoneMobile remove-item"><i class="icon-squared-cross"></i>Xóa</button>
                                            }

                                        </div>
                                        <input type="hidden" class="codeMobile" value="@iMobile" />
                                    </div>
                                    iMobile++;
                                }
                            }
                        }
                    }
                    <div class="col-12 p-1 more-mobile">
                        <div class="form-group">
                            <button class="btn btn-success btn-sm addMobile" type="button"><i class="icon icon-add-to-list"></i> Thêm số di động</button>
                        </div>
                    </div>
                    <script id="tmplMobile" type="text/x-jsrender">
                        <div class="col-6 nodeMobile node">
                            <div class="form-group">
                                <i class="icon icon-phone"></i>
                                <label>Số điện thoại</label>
                                <button type="button" class="btn btn-link btn-sm remove-item"><i class="icon-squared-cross"></i>Xóa</button>
                                <input name="Employee.Mobiles[{{:code}}].Number" class="form-control form-control-lg" />
                            </div>
                            <input type="hidden" class="codeMobile" value="{{:code}}" />
                        </div>
                    </script>

                    <div class="col-12">
                        <div class="form-group">
                            <label asp-for="Employee.Bornplace" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.Bornplace" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.Bornplace != Model.EmployeeChance.Bornplace)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.Bornplace" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.Bornplace"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @Model.EmployeeChance.Bornplace</p>
                                    }
                                    else
                                    {
                                        var bornplace = string.IsNullOrEmpty(Model.Employee.Bornplace) ? "Không có dữ liệu" : Model.Employee.Bornplace;
                                        <input asp-for="Employee.Bornplace" value="@Model.EmployeeChance.Bornplace" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @bornplace</p>
                                    }
                                }
                            }
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="form-group">
                            <label asp-for="Employee.AddressResident" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.AddressResident" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.AddressResident != Model.EmployeeChance.AddressResident)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.AddressResident" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.AddressResident">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.AddressResident
                                        </p>
                                    }
                                    else
                                    {
                                        var addressResident = string.IsNullOrEmpty(Model.Employee.AddressResident) ? "Không có dữ liệu" : Model.Employee.AddressResident;
                                        <input asp-for="Employee.AddressResident" value="@Model.EmployeeChance.AddressResident" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @addressResident</p>
                                    }
                                }
                            }
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label asp-for="Employee.AddressTemporary" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.AddressTemporary" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.AddressTemporary != Model.EmployeeChance.AddressTemporary)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.AddressTemporary" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.AddressTemporary">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.AddressTemporary
                                        </p>
                                    }
                                    else
                                    {
                                        var addressTemporary = string.IsNullOrEmpty(Model.Employee.AddressTemporary) ? "Không có dữ liệu" : Model.Employee.AddressTemporary;
                                        <input asp-for="Employee.AddressTemporary" value="@Model.EmployeeChance.AddressTemporary" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @addressTemporary</p>
                                    }
                                }
                                else
                                {
                                    <input asp-for="Employee.AddressTemporary" class="form-control form-control-lg" />
                                }
                            }
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="form-group">
                            <i class="icon icon-email"></i>
                            <label asp-for="Employee.EmailPersonal" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.EmailPersonal" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.EmailPersonal != Model.EmployeeChance.EmailPersonal)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.EmailPersonal" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.EmailPersonal">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.EmailPersonal
                                        </p>
                                    }
                                    else
                                    {
                                        var emailPersonal = string.IsNullOrEmpty(Model.Employee.EmailPersonal) ? "Không có dữ liệu" : Model.Employee.EmailPersonal;
                                        <input asp-for="Employee.EmailPersonal" value="@Model.EmployeeChance.EmailPersonal" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @emailPersonal</p>
                                    }
                                }
                                else
                                {
                                    <input asp-for="Employee.EmailPersonal" class="form-control form-control-lg" />
                                }
                            }
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Employee.StatusMarital" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <select asp-for="Employee.StatusMarital" class="form-control form-control-lg">
                                    <option value="">Chọn</option>
                                    <option value="S">Độc thân</option>
                                    <option value="M">Kết hôn</option>
                                </select>
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.EmailPersonal != Model.EmployeeChance.EmailPersonal)
                                {
                                    if (rightNhanSu)
                                    {
                                        <select asp-for="Employee.StatusMarital" class="form-control form-control-lg">
                                            <option value="">Chọn</option>
                                            <option value="S">Độc thân</option>
                                            <option value="M">Kết hôn</option>
                                        </select>
                                        <p class="select-change-data" data-value="@Model.EmployeeChance.StatusMarital">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Constants.Married(Model.EmployeeChance.StatusMarital)
                                        </p>
                                    }
                                    else
                                    {
                                        <select asp-for="EmployeeChance.StatusMarital" name="Model.Employee.StatusMarital" class="form-control form-control-lg">
                                            <option value="">Chọn</option>
                                            <option value="S">Độc thân</option>
                                            <option value="M">Kết hôn</option>
                                        </select>
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Constants.Married(Model.Employee.StatusMarital)</p>
                                    }
                                }
                            }
                        </div>
                    </div>


                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Employee.Nation" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.Nation" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.Nation != Model.EmployeeChance.Nation)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.Nation" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.Nation">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.Nation
                                        </p>
                                    }
                                    else
                                    {
                                        <input asp-for="Employee.Nation" value="@Model.EmployeeChance.Nation" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.Nation</p>
                                    }
                                }
                            }
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Employee.Religion" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <input asp-for="Employee.Religion" class="form-control form-control-lg" />
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.Religion != Model.EmployeeChance.Religion)
                                {
                                    if (rightNhanSu)
                                    {
                                        <input asp-for="Employee.Religion" class="form-control form-control-lg" />
                                        <p class="btn-change-data" data-value="@Model.EmployeeChance.Religion">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.Religion
                                        </p>
                                    }
                                    else
                                    {
                                        <input asp-for="Employee.Religion" value="@Model.EmployeeChance.Religion" class="form-control form-control-lg" />
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.Religion</p>
                                    }
                                }
                            }
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label asp-for="Employee.Intro" class="control-label"></label>
                            @if (!Model.StatusChange)
                            {
                                <textarea asp-for="Employee.Intro" class="form-control form-control-lg js-auto-size"></textarea>
                            }
                            else
                            {
                                if (Model.EmployeeChance != null && Model.Employee.Intro != Model.EmployeeChance.Intro)
                                {
                                    if (rightNhanSu)
                                    {
                                        <textarea asp-for="Employee.Intro" class="form-control form-control-lg js-auto-size"></textarea>
                                        <p class="txt-change-data" data-value="@Model.EmployeeChance.Intro">
                                            <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                            @Model.EmployeeChance.Intro
                                        </p>
                                    }
                                    else
                                    {
                                        <textarea asp-for="Employee.Intro" class="form-control form-control-lg js-auto-size">@Model.EmployeeChance.Intro</textarea>
                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.Intro</p>
                                    }
                                }
                            }
                        </div>
                    </div>
                </div>

                <!-- CMND/PASSPORT, BHXH -->
                <hr />
                <div class="row mb-4">
                    <div class="col">
                        <h5>Số thẻ định danh</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-4 order-md-2">
                        <div class="alert alert-info text-small" role="alert">
                            <i class="icon-user"></i>
                            <span>
                                Thông tin này được bảo mật.
                            </span>
                            <a href="/pp/chinh-sach-bao-mat">Xem chính sách bảo mật</a>
                        </div>
                    </div>

                    <div class="col-12 col-md-8 order-md-1">
                        <div class="row">
                            <!-- CMND -->
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.IdentityCard" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.IdentityCard" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.IdentityCard != Model.EmployeeChance.IdentityCard)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.IdentityCard" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.IdentityCard">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.IdentityCard
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.IdentityCard" value="@Model.EmployeeChance.IdentityCard" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.IdentityCard</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.IdentityCardDate" class="control-label"></label>
                                    @{
                                        var identityCardDate = Model.Employee.IdentityCardDate.HasValue && Model.Employee.IdentityCardDate.Value.Year > 1900 ? Model.Employee.IdentityCardDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        var identityCardDateChange = string.Empty;
                                        if (Model.StatusChange && Model.EmployeeChance != null)
                                        {
                                            identityCardDateChange = Model.EmployeeChance.IdentityCardDate.HasValue && Model.EmployeeChance.IdentityCardDate.Value.Year > 1900 ? Model.EmployeeChance.IdentityCardDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }

                                        if (!Model.StatusChange)
                                        {
                                            if (!string.IsNullOrEmpty(identityCardDate))
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@identityCardDate" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                            <input type="hidden" name="Employee.IdentityCardDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.IdentityCardDate" />
                                        }
                                        else
                                        {
                                            if (!string.IsNullOrEmpty(identityCardDateChange) && Model.Employee.IdentityCardDate != Model.EmployeeChance.IdentityCardDate)
                                            {
                                                if (rightNhanSu)
                                                {
                                                    if (!string.IsNullOrEmpty(identityCardDate))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@identityCardDate" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="btn-change-data" data-value="@identityCardDateChange"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @identityCardDateChange</p>
                                                    <input type="hidden" name="Employee.IdentityCardDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.IdentityCardDate" />
                                                }
                                                else
                                                {
                                                    if (!string.IsNullOrEmpty(identityCardDateChange))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@identityCardDateChange" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @identityCardDate</p>
                                                    <input type="hidden" name="Employee.IdentityCardDate" class="form-control form-control-lg hidedatepicker" value="@Model.EmployeeChance.IdentityCardDate" />
                                                }
                                            }
                                        }
                                    }

                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.IdentityCardPlace" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.IdentityCardPlace" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.IdentityCardPlace != Model.EmployeeChance.IdentityCardPlace)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.IdentityCardPlace" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.IdentityCardPlace">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.IdentityCardPlace
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.IdentityCardPlace" value="@Model.EmployeeChance.IdentityCardPlace" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.IdentityCardPlace</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>

                            <!-- HO KHAU -->
                            <hr />
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.HouseHold" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.HouseHold" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.HouseHold != Model.EmployeeChance.HouseHold)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.HouseHold" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.HouseHold">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.HouseHold
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.HouseHold" value="@Model.EmployeeChance.HouseHold" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.HouseHold</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.HouseHoldOwner" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.HouseHoldOwner" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.HouseHoldOwner != Model.EmployeeChance.HouseHoldOwner)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.HouseHoldOwner" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.HouseHoldOwner">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.HouseHoldOwner
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.HouseHoldOwner" value="@Model.EmployeeChance.HouseHoldOwner" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.HouseHoldOwner</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>

                            <!-- PASSPORT -->
                            <hr />
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.Passport" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.Passport" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.Passport != Model.EmployeeChance.Passport)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.Passport" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.Passport">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.Passport
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.Passport" value="@Model.EmployeeChance.Passport" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.Passport</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.PassportType" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.PassportType" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.PassportType != Model.EmployeeChance.PassportType)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.PassportType" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.PassportType">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.PassportType
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.PassportType" value="@Model.EmployeeChance.PassportType" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.PassportType</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.PassportCode" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.PassportCode" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.PassportCode != Model.EmployeeChance.PassportCode)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.PassportCode" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.PassportCode">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.PassportCode
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.PassportCode" value="@Model.EmployeeChance.PassportCode" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.PassportCode</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.PassportDate" class="control-label"></label>
                                    @{
                                        var passportDate = Model.Employee.PassportDate.HasValue && Model.Employee.PassportDate.Value.Year > 1900 ? Model.Employee.PassportDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        var passportDateChange = string.Empty;
                                        if (Model.StatusChange && Model.EmployeeChance != null)
                                        {
                                            passportDateChange = Model.EmployeeChance.PassportDate.HasValue && Model.EmployeeChance.PassportDate.Value.Year > 1900 ? Model.EmployeeChance.PassportDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }

                                        if (!Model.StatusChange)
                                        {
                                            if (!string.IsNullOrEmpty(passportDate))
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportDate" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                            <input type="hidden" name="Employee.PassportDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.PassportDate" />
                                        }
                                        else
                                        {
                                            if (!string.IsNullOrEmpty(passportDateChange) && Model.Employee.PassportDate != Model.EmployeeChance.PassportDate)
                                            {
                                                if (rightNhanSu)
                                                {
                                                    if (!string.IsNullOrEmpty(passportDate))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportDate" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="btn-change-data" data-value="@passportDateChange"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @passportDateChange</p>
                                                    <input type="hidden" name="Employee.PassportDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.PassportDate" />
                                                }
                                                else
                                                {
                                                    if (!string.IsNullOrEmpty(passportDateChange))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportDateChange" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @passportDate</p>
                                                    <input type="hidden" name="Employee.PassportDate" class="form-control form-control-lg hidedatepicker" value="@Model.EmployeeChance.PassportDate" />
                                                }
                                            }
                                        }
                                    }

                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label asp-for="Employee.PassportExpireDate" class="control-label"></label>
                                    @{
                                        var passportExpireDate = Model.Employee.PassportExpireDate.HasValue && Model.Employee.PassportExpireDate.Value.Year > 1900 ? Model.Employee.PassportExpireDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        var passportExpireDateChange = string.Empty;
                                        if (Model.StatusChange && Model.EmployeeChance != null)
                                        {
                                            passportExpireDateChange = Model.EmployeeChance.PassportExpireDate.HasValue && Model.EmployeeChance.PassportExpireDate.Value.Year > 1900 ? Model.EmployeeChance.PassportExpireDate.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }

                                        if (!Model.StatusChange)
                                        {
                                            if (!string.IsNullOrEmpty(passportExpireDate))
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportExpireDate" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                            <input type="hidden" name="Employee.PassportExpireDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.PassportExpireDate" />
                                        }
                                        else
                                        {
                                            if (!string.IsNullOrEmpty(passportExpireDateChange) && Model.Employee.PassportExpireDate != Model.EmployeeChance.PassportExpireDate)
                                            {
                                                if (rightNhanSu)
                                                {
                                                    if (!string.IsNullOrEmpty(passportExpireDate))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportExpireDate" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="btn-change-data" data-value="@passportExpireDateChange"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @passportExpireDateChange</p>
                                                    <input type="hidden" name="Employee.PassportExpireDate" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.PassportExpireDate" />
                                                }
                                                else
                                                {
                                                    if (!string.IsNullOrEmpty(passportExpireDateChange))
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@passportExpireDateChange" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                    <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @passportExpireDate</p>
                                                    <input type="hidden" name="Employee.PassportExpireDate" class="form-control form-control-lg hidedatepicker" value="@Model.EmployeeChance.PassportExpireDate" />
                                                }
                                            }
                                        }
                                    }
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.PassportPlace" class="control-label"></label>
                                    @if (!Model.StatusChange)
                                    {
                                        <input asp-for="Employee.PassportPlace" class="form-control form-control-lg" />
                                    }
                                    else
                                    {
                                        if (Model.EmployeeChance != null && Model.Employee.PassportPlace != Model.EmployeeChance.PassportPlace)
                                        {
                                            if (rightNhanSu)
                                            {
                                                <input asp-for="Employee.PassportPlace" class="form-control form-control-lg" />
                                                <p class="btn-change-data" data-value="@Model.EmployeeChance.PassportPlace">
                                                    <small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small>
                                                    @Model.EmployeeChance.PassportPlace
                                                </p>
                                            }
                                            else
                                            {
                                                <input asp-for="Employee.PassportPlace" value="@Model.EmployeeChance.PassportPlace" class="form-control form-control-lg" />
                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.PassportPlace</p>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- BHXH -->
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            @{
                                var check = Model.Employee.BhxhEnable ? "checked" : "";
                                var dnone = Model.Employee.BhxhEnable ? "" : "d-none";
                            }
                            <div class="custom-control custom-checkbox custom-checkbox-switch">
                                @if (readonlyMode)
                                {
                                    <input type="checkbox" class="custom-control-input" id="public" @check disabled />
                                }
                                else
                                {
                                    <input type="checkbox" class="custom-control-input" id="public" @check />
                                }
                                <label class="custom-control-label" for="public">Bảo hiểm xã hội</label>
                                <input name="Employee.BhxhEnable" type="hidden" class="custom-control-input" value="@Model.Employee.BhxhEnable" />
                            </div>
                        </div>
                    </div>

                    <div class="enableBhxh col-12 @dnone">
                        <div class="row">
                            @if (readonlyMode)
                            {
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhBookNo" class="control-label"></label>
                                        @if (!string.IsNullOrEmpty(Model.Employee.BhxhBookNo))
                                        {
                                            <p>@Model.Employee.BhxhBookNo</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhCode" class="control-label"></label>
                                        @if (!string.IsNullOrEmpty(Model.Employee.BhxhCode))
                                        {
                                            <p>@Model.Employee.BhxhCode</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhStart" class="control-label"></label>
                                        @{
                                            var bhxhStart = Model.Employee.BhxhStart.HasValue ? Model.Employee.BhxhStart.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }
                                        @if (!string.IsNullOrEmpty(bhxhStart))
                                        {
                                            <p>@bhxhStart</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhEnd" class="control-label"></label>
                                        @{
                                            var bhxhEnd = Model.Employee.BhxhEnd.HasValue ? Model.Employee.BhxhEnd.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }
                                        @if (!string.IsNullOrEmpty(bhxhEnd))
                                        {
                                            <p>@bhxhEnd</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhStatus" class="control-label"></label>
                                        @if (!string.IsNullOrEmpty(Model.Employee.BhxhStatus))
                                        {
                                            <p>@Model.Employee.BhxhStatus</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhBookNo" class="control-label"></label>
                                        <input asp-for="Employee.BhxhBookNo" class="form-control form-control-lg" />
                                        <span asp-validation-for="Employee.BhxhBookNo" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhCode" class="control-label"></label>
                                        <input asp-for="Employee.BhxhCode" class="form-control form-control-lg" />
                                        <span asp-validation-for="Employee.BhxhCode" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhStart" class="control-label"></label>
                                        @{
                                            if (Model.Employee.BhxhStart.HasValue)
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.BhxhStart.Value.ToString("dd/MM/yyyy")" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                        }
                                        <input type="hidden" name="Employee.BhxhStart" class="form-control form-control-lg hidedatepicker" value="@Model.Employee.BhxhStart" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhEnd" class="control-label"></label>
                                        @{
                                            if (Model.Employee.BhxhEnd.HasValue)
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.BhxhEnd.Value.ToString("dd/MM/yyyy")" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                        }
                                        <input type="hidden" name="Employee.BhxhEnd" value="@Model.Employee.BhxhEnd" class="form-control form-control-lg hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhStatus" class="control-label"></label>
                                        <select asp-for="Employee.BhxhStatus" class="form-control form-control-lg">
                                            <option value="Đang đóng">Đang đóng</option>
                                            <option value="Chưa đóng">Chưa đóng</option>
                                        </select>
                                        <span asp-validation-for="Employee.BhxhStatus" class="text-danger"></span>
                                    </div>
                                </div>
                            }
                            <div class="col-12">
                                <div class="form-group">
                                    <label asp-for="Employee.BhxhHospital" class="control-label"></label>
                                    <div class="row">
                                        <div class="col-10">
                                            @if (!Model.StatusChange)
                                            {
                                                <select asp-for="Employee.BhxhHospital" class="form-control form-control-lg js-select2-basic-single" style="width:100%;">
                                                    <option value="">Chọn</option>
                                                    @{
                                                        foreach (var hospital in ViewBag.Hospitals)
                                                        {
                                                            <option value="@hospital.Name">@hospital.Name</option>
                                                        }
                                                    }
                                                </select>
                                            }
                                            else
                                            {
                                                @if (!string.IsNullOrEmpty(Model.EmployeeChance.BhxhHospital) && Model.Employee.BhxhHospital != Model.EmployeeChance.BhxhHospital)
                                                {
                                                    if (rightNhanSu)
                                                    {
                                                        <select asp-for="Employee.BhxhHospital" class="form-control form-control-lg js-select2-basic-single" style="width:100%;">
                                                            <option value="">Chọn</option>
                                                            @{
                                                                foreach (var hospital in ViewBag.Hospitals)
                                                                {
                                                                    <option value="@hospital.Name">@hospital.Name</option>
                                                                }
                                                            }
                                                        </select>
                                                        <p class="select2-change-data" data-value="@Model.EmployeeChance.BhxhHospital"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @Model.EmployeeChance.BhxhHospital</p>
                                                    }
                                                    else
                                                    {
                                                        <select asp-for="EmployeeChance.BhxhHospital" name="Model.Employee.BhxhHospital" class="form-control form-control-lg js-select2-basic-single" style="width:100%;">
                                                            <option value="">Chọn</option>
                                                            @{
                                                                foreach (var hospital in ViewBag.Hospitals)
                                                                {
                                                                    <option value="@hospital.Name">@hospital.Name</option>
                                                                }
                                                            }
                                                        </select>
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @Model.Employee.BhxhHospital</p>
                                                    }
                                                }
                                            }
                                        </div>
                                        <div class="col-2 align-middle">
                                            <button class="btn btn-sm btn-add-hospital" type="button" data-toggle="modal" data-target="#newHospital" title="Tạo mới Cơ sở khám chữa bệnh">+</button>
                                        </div>


                                    </div>
                                </div>
                            </div>

                            @if (readonlyMode)
                            {
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytCode" class="control-label"></label>
                                        @if (!string.IsNullOrEmpty(Model.Employee.BhytCode))
                                        {
                                            <p>@Model.Employee.BhytCode</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytStart" class="control-label"></label>
                                        @{
                                            var bhytStart = Model.Employee.BhytStart.HasValue && Model.Employee.BhytStart.Value.Year > 1900 ? Model.Employee.BhytStart.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }
                                        @if (!string.IsNullOrEmpty(bhytStart))
                                        {
                                            <p>@bhytStart</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytEnd" class="control-label"></label>
                                        @{
                                            var bhytEnd = Model.Employee.BhytEnd.HasValue && Model.Employee.BhytEnd.Value.Year > 1900 ? Model.Employee.BhytEnd.Value.ToString("dd/MM/yyyy") : string.Empty;
                                        }
                                        @if (!string.IsNullOrEmpty(bhytEnd))
                                        {
                                            <p>@bhytEnd</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhLocation" class="control-label"></label>
                                        @if (!string.IsNullOrEmpty(Model.Employee.BhxhLocation))
                                        {
                                            <p>@Model.Employee.BhxhLocation</p>
                                        }
                                        else
                                        {
                                            <small><i class="icon-info"></i>@Constants.MissTitle</small>
                                        }
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytCode" class="control-label"></label>
                                        <input asp-for="Employee.BhytCode" class="form-control form-control-lg" />
                                        <span asp-validation-for="Employee.BhytCode" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytStart" class="control-label"></label>
                                        @{
                                            if (Model.Employee.BhytStart.HasValue)
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.BhytStart.Value.ToString("dd/MM/yyyy")" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                        }
                                        <input type="hidden" name="Employee.BhytStart" value="@Model.Employee.BhytStart" class="form-control form-control-lg hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhytEnd" class="control-label"></label>
                                        @{
                                            if (Model.Employee.BhytEnd.HasValue)
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@Model.Employee.BhytEnd.Value.ToString("dd/MM/yyyy")" />
                                            }
                                            else
                                            {
                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                            }
                                        }
                                        <input type="hidden" name="Employee.BhytEnd" value="@Model.Employee.BhytEnd" class="form-control form-control-lg hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label asp-for="Employee.BhxhLocation" class="control-label"></label>
                                        <input asp-for="Employee.BhxhLocation" class="form-control form-control-lg" />
                                        <span asp-validation-for="Employee.BhxhLocation" class="text-danger"></span>
                                    </div>
                                </div>
                            }


                            @if (!readonlyMode)
                            {
                                <span class="badge badge-info">Tác vụ BHXH</span>
                                @if (Model.Employee.BhxhHistories != null && Model.Employee.BhxhHistories.Count > 0)
                                {
                                    i = 0;
                                    foreach (var item in Model.Employee.BhxhHistories)
                                    {
                                        <div class="col-12 nodeBHXH node">
                                            <hr />
                                            <div class="row bd-example">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Tác vụ</label>
                                                        <select asp-for="Employee.BhxhHistories[i].Task" class="form-control form-control-lg">
                                                            <option value="tang-bhxh">Tăng BHXH</option>
                                                            <option value="giam-bhxh">Giảm BHXH</option>
                                                            <option value="the-bhyt">Thẻ BHYT</option>
                                                            <option value="ghi-che-do-thai-san">Ghi chế độ thai sản</option>
                                                            <option value="ghi-che-do-om-dau">Ghi chế độ ốm đau</option>
                                                            <option value="ghi-che-do-tai-nan-lao-dong">Ghi chế độ tai nan lao động</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Ngày thực hiện</label>
                                                        @{
                                                            if (item.DateAction.HasValue)
                                                            {
                                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@item.DateAction.Value.ToString("dd/MM/yyyy")" />
                                                            }
                                                            else
                                                            {
                                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                            }
                                                        }
                                                        <input type="hidden" name="Employee.BhxhHistories[@i].DateAction" value="@item.DateAction" class="form-control form-control-lg hidedatepicker" />
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Ngày trả kết quả</label>
                                                        @{
                                                            if (item.DateResult.HasValue)
                                                            {
                                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@item.DateResult.Value.ToString("dd/MM/yyyy")" />
                                                            }
                                                            else
                                                            {
                                                                <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                            }
                                                        }
                                                        <input type="hidden" name="Employee.BhxhHistories[@i].DateResult" value="@item.DateResult" class="form-control form-control-lg hidedatepicker" />
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Tình trạng</label>
                                                        <select asp-for="Employee.BhxhHistories[i].Status" class="form-control form-control-lg">
                                                            <option value="0">Chờ</option>
                                                            <option value="1">Hoàn thành</option>
                                                            <option value="2">Không xác định</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="note-icon-col-remove"></i>Xóa</button>
                                                </div>
                                            </div>
                                            <input type="hidden" class="codeBHXH" value="@i" />
                                        </div>
                                        i++;
                                    }
                                }
                                <div class="col-12 p-1 more-task-bhxh">
                                    <div class="form-group">
                                        <button class="btn btn-success btn-sm addBHXH" type="button"><i class="icon icon-add-to-list"></i> Thêm tác vụ</button>
                                    </div>
                                </div>
                            }
                            <script id="tmplBHXH" type="text/x-jsrender">
                                <div class="col-12 nodeBHXH node">
                                    <hr />
                                    <div class="row bd-example">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label class="control-label">Tác vụ</label>
                                                <select name="Employee.BhxhHistories[{{:code}}].Task" class="form-control form-control-lg task-bhxh">
                                                    <option value="tang-bhxh">Tăng BHXH</option>
                                                    <option value="giam-bhxh">Giảm BHXH</option>
                                                    <option value="the-bhyt">Thẻ BHYT</option>
                                                    <option value="ghi-che-do-thai-san">Ghi chế độ thai sản</option>
                                                    <option value="ghi-che-do-om-dau">Ghi chế độ ốm đau</option>
                                                    <option value="ghi-che-do-tai-nan-lao-dong">Ghi chế độ tai nan lao động</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Ngày thực hiện</label>
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@DateTime.Now.ToString("dd/MM/yyyy")" />
                                                <input type="hidden" name="Employee.BhxhHistories[{{:code}}].DateAction" class="form-control form-control-lg hidedatepicker" value="false" />
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Ngày trả kết quả</label>
                                                <input class="form-control form-control-lg datepicker datepicker-lg" value="@DateTime.Now.ToString("dd/MM/yyyy")" />
                                                <input type="hidden" name="Employee.BhxhHistories[{{:code}}].DateResult" class="form-control form-control-lg hidedatepicker" value="false" />
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Tình trạng</label>
                                                <select name="Employee.BhxhHistories[{{:code}}].Status" class="form-control form-control-lg">
                                                    <option value="0">Chờ</option>
                                                    <option value="1">Hoàn thành</option>
                                                    <option value="2">Không xác định</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <button type="button" class="btn btn-danger btn-sm remove-item"><i class="note-icon-col-remove"></i>Xóa</button>
                                        </div>
                                    </div>
                                    <input type="hidden" class="codeBHXH" value="{{:code}}" />
                                    <input type="hidden" name="Employee.BhxhHistories[{{:code}}].TaskDisplay" class="task-bhxh-display" />
                                </div>
                            </script>
                        </div>
                    </div>
                </div>

                <!-- Certificates -->
                <hr />
                <div class="row mb-4">
                    <div class="col">
                        <h5>Học vấn</h5>
                    </div>
                    <!--end of col-->
                </div>
                <div class="row">
                    @{
                        var cer1 = Model.Employee.Certificates;
                        var cer2 = Model.EmployeeChance != null ? Model.EmployeeChance.Certificates : null;
                        if (cer1 != null && cer1.Count > 0)
                        {
                            var iHocVan = 0;
                            foreach (var item in cer1)
                            {
                                <div class="col-12 nodeCertificate node">
                                    <div class="row bd-example">
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Học vấn</label>
                                                <input asp-for="Employee.Certificates[iHocVan].Type" class="form-control form-control-lg" />
                                                @if (Model.StatusChange && cer2.Count >= cer1.Count && cer2[iHocVan] != null)
                                                {
                                                    if (item.Type != cer2[iHocVan].Type)
                                                    {
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@cer2[iHocVan].Type"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[iHocVan].Type</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[iHocVan].Type</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label class="control-label">Nơi cấp</label>
                                                <input asp-for="Employee.Certificates[iHocVan].Location" class="form-control form-control-lg" />
                                                @if (Model.StatusChange && cer2.Count >= cer1.Count && cer2[iHocVan] != null)
                                                {
                                                    if (item.Location != cer2[iHocVan].Location)
                                                    {
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@cer2[iHocVan].Location"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[iHocVan].Location</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[iHocVan].Location</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label class="control-label">Mô tả</label>
                                                <textarea asp-for="Employee.Certificates[iHocVan].Description" class="form-control form-control-lg js-auto-size"></textarea>
                                                @if (Model.StatusChange && cer2.Count >= cer1.Count && cer2[iHocVan] != null)
                                                {
                                                    if (item.Description != cer2[iHocVan].Description)
                                                    {
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="txt-change-data" data-value="@cer2[iHocVan].Description"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[iHocVan].Description</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[iHocVan].Description</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                        @if (iHocVan != 0)
                                        {
                                            <div class="col-12">
                                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                            </div>
                                        }
                                    </div>
                                    <input type="hidden" class="codeCertificate" value="@iHocVan" />
                                </div>
                                iHocVan++;
                            }
                            if (Model.StatusChange && cer2 != null && cer2.Count > 0 && cer2.Count > cer1.Count)
                            {
                                for (int icer2 = iHocVan; icer2 < cer2.Count; icer2++)
                                {
                                    <div class="col-12 nodeCertificate node">
                                        <div class="row bd-example">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Học vấn</label>
                                                    <input name="Employee.Certificates[@icer2].Type" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@cer2[icer2].Type"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[icer2].Type</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[icer2].Type</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Nơi cấp</label>
                                                    <input name="Employee.Certificates[@icer2].Location" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@cer2[icer2].Location"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[icer2].Location</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[icer2].Location</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Nội dung</label>
                                                    <textarea name="Employee.Certificates[@icer2].Description" class="form-control form-control-lg js-auto-size"></textarea>
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="txt-change-data" data-value="@cer2[icer2].Description"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @cer2[icer2].Description</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @cer2[icer2].Description</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                            </div>
                                        </div>
                                        <input type="hidden" class="codeCertificate" value="@icer2" />
                                    </div>
                                }
                            }
                        }
                        else
                        {
                            <p>@Constants.MissTitle</p>
                            if (cer2 != null && cer2.Count > 0)
                            {
                                var iHocVanChange = 0;
                                foreach (var item in cer2)
                                {
                                    <div class="col-12 nodeCertificate node">
                                        <div class="row bd-example">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Học vấn</label>
                                                    <input name="Employee.Certificates[@iHocVanChange].Type" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@item.Type"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @item.Type</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @item.Type</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Nơi cấp</label>
                                                    <input name="Employee.Certificates[@iHocVanChange].Location" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@item.Location"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @item.Location</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @item.Location</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Nội dung</label>
                                                    <textarea name="Employee.Certificates[@iHocVanChange].Description" class="form-control form-control-lg js-auto-size"></textarea>
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="txt-change-data" data-value="@item.Description"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @item.Description</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @item.Description</p>
                                                    }
                                                </div>
                                            </div>
                                            @if (iHocVanChange != 0)
                                            {
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                                </div>
                                            }
                                        </div>
                                        <input type="hidden" class="codeCertificate" value="@iHocVanChange" />
                                    </div>
                                    iHocVanChange++;
                                }
                            }
                        }
                    }

                    <div class="col-12 p-1 more-certificate">
                        <div class="form-group">
                            <button class="btn btn-success btn-sm addCertificate" type="button"><i class="icon icon-add-to-list"></i> Thêm học vấn</button>
                        </div>
                    </div>
                    <script id="tmplCertificate" type="text/x-jsrender">
                        <div class="col-12 nodeCertificate node">
                            <div class="row bd-example">
                                <div class="col-6">
                                    <div class="form-group">
                                        <label class="control-label">Học vấn</label>
                                        <input name="Employee.Certificates[{{:code}}].Type" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="control-label">Nơi cấp</label>
                                        <input name="Employee.Certificates[{{:code}}].Location" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="control-label">Mô tả</label>
                                        <textarea name="Employee.Certificates[{{:code}}].Description" class="form-control form-control-lg js-auto-size"></textarea>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                </div>
                            </div>
                            <input type="hidden" class="codeCertificate" value="{{:code}}" />
                        </div>
                    </script>
                </div>


                <!-- FAMILY -->
                <hr />
                <div class="row mb-4">
                    <div class="col">
                        <h5>Thành viên gia đình</h5>
                    </div>
                    <!--end of col-->
                </div>

                <div class="row">
                    @{
                        var fa1 = Model.Employee.EmployeeFamilys;
                        var fa2 = Model.EmployeeChance != null ? Model.EmployeeChance.EmployeeFamilys : null;
                        if (fa1 != null && fa1.Count > 0)
                        {
                            int iFa = 0;
                            foreach (var item in fa1)
                            {
                                <div class="col-12 nodeFamily node">
                                    <div class="row bd-example">
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Quan hệ</label>
                                                <select asp-for="Employee.EmployeeFamilys[iFa].Relation" class="form-control form-control-lg">
                                                    <option value="">Chọn</option>
                                                    <option value="3">Con</option>
                                                    <option value="2">Vợ/chồng</option>
                                                    <option value="1">Cha/mẹ</option>
                                                </select>
                                                @if (Model.StatusChange && fa2.Count >= fa1.Count && fa2[iFa] != null)
                                                {
                                                    if (item.Relation != fa2[iFa].Relation)
                                                    {
                                                        var displayRelation = string.Empty;
                                                        if (fa2[iFa].Relation.HasValue)
                                                        {
                                                            displayRelation = Constants.Relation(fa2[iFa].Relation.Value);
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="select-change-data" data-value="@fa2[iFa].Relation"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayRelation</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayRelation</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Ngày sinh nhật</label>
                                                @{
                                                    if (item.Birthday.HasValue)
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@item.Birthday.Value.ToString("dd/MM/yyyy")" />
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    }
                                                }
                                                @if (Model.StatusChange && fa2.Count >= fa1.Count && fa2[iFa] != null)
                                                {
                                                    if (item.Birthday != fa2[iFa].Birthday)
                                                    {
                                                        var displayBirthday = string.Empty;
                                                        if (fa2[iFa].Birthday.HasValue)
                                                        {
                                                            displayBirthday = fa2[iFa].Birthday.Value.ToString("dd/MM/yyyy");
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@fa2[iFa].Birthday"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayBirthday</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayBirthday</p>
                                                        }
                                                    }
                                                }
                                                <input type="hidden" name="Employee.EmployeeFamilys[@iFa].Birthday" value="@item.Birthday" class="hidedatepicker" />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label class="control-label">Họ và tên</label>
                                                <input name="Employee.EmployeeFamilys[@iFa].FullName" value="@item.FullName" class="form-control form-control-lg" />
                                                @if (Model.StatusChange && fa2.Count >= fa1.Count && fa2[iFa] != null)
                                                {
                                                    if (item.FullName != fa2[iFa].FullName)
                                                    {
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@fa2[iFa].FullName"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @fa2[iFa].FullName</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @fa2[iFa].FullName</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                        @if (iFa != 0)
                                        {
                                            <div class="col-12">
                                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                            </div>
                                        }
                                    </div>
                                    <input type="hidden" class="codeFamily" value="@iFa" />
                                </div>
                                iFa++;
                            }
                            if (Model.StatusChange && fa2 != null && fa2.Count > 0 && fa2.Count > fa1.Count)
                            {
                                for (int iFa2 = iFa; iFa2 < fa2.Count; iFa2++)
                                {
                                    <div class="col-12 nodeFamily node">
                                        <div class="row bd-example">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Quan hệ</label>
                                                    <select name="Employee.EmployeeFamilys[@iFa2].Relation" class="form-control form-control-lg">
                                                        <option value="">Chọn</option>
                                                        <option value="3">Con</option>
                                                        <option value="2">Vợ/chồng</option>
                                                        <option value="1">Cha/mẹ</option>
                                                    </select>
                                                    @{
                                                        var displayRelation = string.Empty;
                                                        if (fa2[iFa].Relation.HasValue)
                                                        {
                                                            displayRelation = Constants.Relation(fa2[iFa].Relation.Value);
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="select-change-data" data-value="@fa2[iFa2].Relation"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayRelation</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayRelation</p>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày sinh nhật</label>
                                                    <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    @{
                                                        var displayBirthday = string.Empty;
                                                        if (fa2[iFa].Birthday.HasValue)
                                                        {
                                                            displayBirthday = fa2[iFa].Birthday.Value.ToString("dd/MM/yyyy");
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@fa2[iFa2].Birthday"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayBirthday</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayBirthday</p>
                                                        }
                                                    }
                                                    <input type="hidden" name="Employee.EmployeeFamilys[@iFa2].Birthday" value="@fa2[iFa2].Birthday" class="hidedatepicker" />
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Họ và tên</label>
                                                    <input name="Employee.EmployeeFamilys[@iFa2].FullName" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@fa2[iFa2].FullName"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @fa2[iFa2].FullName</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @fa2[iFa2].FullName</p>
                                                    }
                                                </div>
                                            </div>
                                            @if (iFa != 0)
                                            {
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                                </div>
                                            }
                                        </div>
                                        <input type="hidden" class="codeFamily" value="@iFa2" />
                                    </div>
                                }
                            }
                        }
                        else
                        {
                            <p>@Constants.MissTitle</p>
                            if (fa2 != null && fa2.Count > 0)
                            {
                                var iFaChange = 0;
                                foreach (var item in fa2)
                                {
                                    <div class="col-12 nodeFamily node">
                                        <div class="row bd-example">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Quan hệ</label>
                                                    <select name="Employee.EmployeeFamilys[@iFaChange].Relation" class="form-control form-control-lg">
                                                        <option value="">Chọn</option>
                                                        <option value="3">Con</option>
                                                        <option value="2">Vợ/chồng</option>
                                                        <option value="1">Cha/mẹ</option>
                                                    </select>
                                                    @{
                                                        var displayRelation = string.Empty;
                                                        if (item.Relation.HasValue)
                                                        {
                                                            displayRelation = Constants.Relation(item.Relation.Value);
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="select-change-data" data-value="@item.Relation"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayRelation</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayRelation</p>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày sinh nhật</label>
                                                    <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                    @{
                                                        var displayBirthday = string.Empty;
                                                        if (item.Birthday.HasValue)
                                                        {
                                                            displayBirthday = item.Birthday.Value.ToString("dd/MM/yyyy");
                                                        }
                                                        if (rightNhanSu)
                                                        {
                                                            <p class="btn-change-data" data-value="@item.Birthday"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @displayBirthday</p>
                                                        }
                                                        else
                                                        {
                                                            <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @displayBirthday</p>
                                                        }
                                                    }
                                                    <input type="hidden" name="Employee.EmployeeFamilys[@iFaChange].Birthday" value="@item.Birthday" class="hidedatepicker" />
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Họ và tên</label>
                                                    <input name="Employee.EmployeeFamilys[@iFaChange].FullName" class="form-control form-control-lg" />
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="btn-change-data" data-value="@item.FullName"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @item.FullName</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @item.FullName</p>
                                                    }
                                                </div>
                                            </div>
                                            @if (iFaChange != 0)
                                            {
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                                </div>
                                            }
                                        </div>
                                        <input type="hidden" class="codeFamily" value="@iFaChange" />
                                    </div>

                                    iFaChange++;
                                }
                            }
                        }
                    }

                    <div class="col-12 p-1 more-family">
                        <div class="form-group">
                            <button class="btn btn-success btn-sm addFamily" type="button"><i class="icon icon-add-user"></i> Thêm thành viên</button>
                        </div>
                    </div>

                    <script id="tmplFamily" type="text/x-jsrender">
                        <div class="col-12 nodeFamily node">
                            <div class="row bd-example">
                                <div class="col-6">
                                    <div class="form-group">
                                        <label class="control-label">Quan hệ</label>
                                        <select name="Employee.EmployeeFamilys[{{:code}}].Relation" class="form-control form-control-lg">
                                            <option value="3">Con</option>
                                            <option value="2">Vợ/chồng</option>
                                            <option value="1">Cha/mẹ</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <label class="control-label">Ngày sinh nhật</label>
                                        <input class="form-control form-control-lg datepicker datepicker-lg" />
                                        <input type="hidden" name="Employee.EmployeeFamilys[{{:code}}].Birthday" class="hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="control-label">Họ và tên</label>
                                        <input name="Employee.EmployeeFamilys[{{:code}}].FullName" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="icon-remove-user"></i>Xóa</button>
                                </div>
                            </div>
                            <input type="hidden" class="codeFamily" value="{{:code}}" />
                        </div>
                    </script>
                </div>

                <!-- HOP DONG LAO DONG -->
                <div class="row mb-4">
                    <div class="col">
                        <h5>Hợp đồng lao động</h5>
                    </div>
                    <!--end of col-->
                </div>
                <div class="row">
                    @if (readonlyMode)
                    {
                        if (Model.Employee.Contracts != null && Model.Employee.Contracts.Count > 0)
                        {
                            foreach (var contract in Model.Employee.Contracts)
                            {
                                if (!string.IsNullOrEmpty(contract.Code))
                                {
                                    <div class="col-12 nodeContract node">
                                        <div class="bd-example">
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Loại hợp đồng</label>
                                                    <p><span>@contract.TypeName</span></p>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Số hợp đồng</label>
                                                    <p><span>@contract.Code</span></p>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">PLHĐ</label>
                                                    <p><span>@contract.PLHD</span></p>
                                                </div>
                                            </div>
                                            @if (contract.Type == "HĐ KHÔNG XÁC ĐỊNH THỜI HẠN")
                                            {
                                                <div class="col-sm-6 col-xs-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Phụ lục điều chỉnh lương</label>
                                                        <p><span>@contract.PhuLucDieuChinhLuong</span></p>
                                                    </div>
                                                </div>
                                            }
                                            @if (!string.IsNullOrEmpty(contract.Description))
                                            {
                                                <div class="col-sm-6 col-xs-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Ghi chú</label>
                                                        <p><span>@contract.Description</span></p>
                                                    </div>
                                                </div>
                                            }
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày hiệu lực</label>
                                                    @{
                                                        var startContract = contract.Start.HasValue && contract.Start.Value.Year > 1900 ? contract.Start.Value.ToString("dd/MM/yyyy") : string.Empty;
                                                    }
                                                    <p><span>@startContract</span></p>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày hết hiệu lực</label>
                                                    @{
                                                        var endContract = contract.End.HasValue && contract.End.Value.Year > 1900 ? contract.End.Value.ToString("dd/MM/yyyy") : string.Empty;
                                                    }
                                                    <p><span>@endContract</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                            }
                        }
                    }
                    else
                    {
                        if (Model.Employee.Contracts != null && Model.Employee.Contracts.Count > 0)
                        {
                            i = 0;
                            foreach (var contract in Model.Employee.Contracts)
                            {
                                if (!string.IsNullOrEmpty(contract.Code))
                                {
                                    <div class="col-12 nodeContract node">
                                        <div class="row bd-example">
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Loại hợp đồng</label>
                                                    <select asp-for="Employee.Contracts[i].Type" class="form-control form-control-lg contract-type">
                                                        @{
                                                            foreach (var item in ViewBag.Contracts)
                                                            {
                                                                <option value="@item.Id">@item.Name</option>
                                                            }
                                                        }
                                                    </select>
                                                    <input type="hidden" asp-for="Employee.Contracts[i].TypeName" class="contract-type-name" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Số hợp đồng</label>
                                                    <input asp-for="Employee.Contracts[i].Code" class="form-control form-control-lg" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">PLHĐ</label>
                                                    <input asp-for="Employee.Contracts[i].PLHD" class="form-control form-control-lg" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Phụ lục điều chỉnh lương</label>
                                                    <input asp-for="Employee.Contracts[i].PhuLucDieuChinhLuong" class="form-control form-control-lg" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Ghi chú</label>
                                                    <input asp-for="Employee.Contracts[i].Description" class="form-control form-control-lg" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày hiệu lực</label>
                                                    @{
                                                        if (contract.Start.HasValue)
                                                        {
                                                            <input class="form-control form-control-lg datepicker datepicker-lg" value="@contract.Start.Value.ToString("dd/MM/yyyy")" />
                                                        }
                                                        else
                                                        {
                                                            <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                        }
                                                    }
                                                    <input type="hidden" name="Employee.Contracts[@i].Start" value="@contract.Start" class="hidedatepicker" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Ngày hết hiệu lực</label>
                                                    @{
                                                        if (contract.End.HasValue)
                                                        {
                                                            <input class="form-control form-control-lg datepicker datepicker-lg" value="@contract.End.Value.ToString("dd/MM/yyyy")" />
                                                        }
                                                        else
                                                        {
                                                            <input class="form-control form-control-lg datepicker datepicker-lg" />
                                                        }
                                                    }
                                                    <input type="hidden" name="Employee.Contracts[@i].End" value="@contract.End" class="hidedatepicker" />
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="note-icon-col-remove"></i>Xóa</button>
                                            </div>
                                        </div>
                                        <input type="hidden" class="codeContract" value="@i" />
                                    </div>
                                    i++;
                                }
                            }
                        }
                        <div class="col-12 p-1 more-contract">
                            <div class="form-group">
                                <button class="btn btn-success btn-sm addContract" type="button"><i class="icon icon-add-user"></i> Thêm hợp đồng</button>
                            </div>
                        </div>
                    }

                    <script id="tmplContract" type="text/x-jsrender">
                        <div class="col-12 nodeContract node">
                            <div class="row bd-example">
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Loại hợp đồng</label>
                                        <select name="Employee.Contracts[{{:code}}].Type" class="form-control form-control-lg contract-type">
                                            @{
                                                foreach (var item in ViewBag.Contracts)
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                        <input type="hidden" name="Employee.Contracts[{{:code}}].TypeName" class="contract-type-name" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Số hợp đồng</label>
                                        <input name="Employee.Contracts[{{:code}}].Code" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">PLHĐ</label>
                                        <input name="Employee.Contracts[{{:code}}].PLHD" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Phụ lục điều chỉnh lương</label>
                                        <input name="Employee.Contracts[{{:code}}].PhuLucDieuChinhLuong" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Ghi chú</label>
                                        <input name="Employee.Contracts[{{:code}}].Description" class="form-control form-control-lg" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Ngày hiệu lực</label>
                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@DateTime.Now.ToString("dd/MM/yyyy")" />
                                        <input type="hidden" name="Employee.Contracts[{{:code}}].Start" class="hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label">Ngày hết hiệu lực</label>
                                        <input class="form-control form-control-lg datepicker datepicker-lg" value="@DateTime.Now.AddYears(1).ToString("dd/MM/yyyy")" />
                                        <input type="hidden" name="Employee.Contracts[{{:code}}].End" class="hidedatepicker" />
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="note-icon-col-remove"></i>Xóa</button>
                                </div>
                            </div>
                            <input type="hidden" class="codeContract" value="{{:code}}" />
                        </div>
                    </script>
                </div>

                <!-- SO LUONG BAN LUU -->
                <hr />
                <div class="row mb-4">
                    <div class="col">
                        <h5>Số lượng bản lưu</h5>
                    </div>
                    <!--end of col-->
                </div>
                <div class="row">
                    @if (readonlyMode)
                    {
                        if (Model.Employee.StorePapers != null && Model.Employee.StorePapers.Count > 0)
                        {
                            foreach (var item in Model.Employee.StorePapers)
                            {
                                if (item.Count > 0)
                                {
                                    <div class="col-12 nodeStorePaper node">
                                        <div class="row bd-example">
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Loại bảng lưu</label>
                                                    <input value="@item.Type" type="text" readonly class="form-control-plaintext" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label">Số lượng</label>
                                                    <input value="@item.Count" type="text" readonly class="form-control-plaintext" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                            }
                        }
                    }
                    else
                    {

                        if (Model.Employee.StorePapers != null && Model.Employee.StorePapers.Count > 0)
                        {
                            i = 0;
                            foreach (var item in Model.Employee.StorePapers)
                            {
                                <div class="col-12 nodeStorePaper node">
                                    <div class="row bd-example">
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <label class="control-label">Loại bảng lưu</label>
                                                <input asp-for="Employee.StorePapers[i].Type" class="form-control form-control-lg" />
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <label class="control-label">Số lượng</label>
                                                <input asp-for="Employee.StorePapers[i].Count" class="form-control form-control-lg" />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                        </div>
                                    </div>
                                    <input type="hidden" class="codeStorePaper" value="@i" />
                                </div>
                                i++;
                            }
                        }
                        <div class="col-12 p-1 more-storepaper">
                            <div class="form-group">
                                <button class="btn btn-success btn-sm addStorePaper" type="button"><i class="icon icon-add-to-list"></i> Thêm loại bảng lưu</button>
                            </div>
                        </div>
                    }

                </div>

                <script id="tmplStorePaper" type="text/x-jsrender">
                    <div class="col-12 nodeStorePaper node">
                        <div class="row bd-example">
                            <div class="col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label">Loại bảng lưu</label>
                                    <input name="Employee.StorePapers[{{:code}}].Type" class="form-control form-control-lg" />
                                </div>
                            </div>
                            <div class="col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label">Số lượng</label>
                                    <input name="Employee.StorePapers[{{:code}}].Count" class="form-control form-control-lg" />
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                            </div>
                        </div>
                        <input type="hidden" class="codeStorePaper" value="{{:code}}" />
                    </div>
                </script>

                <!-- DAO TAO -->
                <hr />
                <div class="row mb-4">
                    <div class="col">
                        <h5>ĐÀO TẠO (THỜI GIAN, CHUYÊN MÔN, CHỨNG CHỈ)</h5>
                    </div>
                </div>

                <div class="row">
                    @{
                        var tra1 = Model.Employee.EmployeeEducations;
                        var tra2 = Model.EmployeeChance != null ? Model.EmployeeChance.EmployeeEducations : null;
                        if (tra1 != null && tra1.Count > 0)
                        {
                            int iTra = 0;
                            var iTraNo = 1;
                            foreach (var item in tra1)
                            {
                                if (!string.IsNullOrEmpty(item.Content))
                                {
                                    <div class="col-12 nodeEducation node">
                                        <div class="row bd-example">
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Lần @iTraNo - Nội dung</label>
                                                    <textarea asp-for="Employee.EmployeeEducations[iTra].Content" class="form-control form-control-lg js-auto-size"></textarea>
                                                    @if (Model.StatusChange && tra2.Count > tra1.Count && tra2[iTra] != null)
                                                    {
                                                        if (item.Content != tra2[iTra].Content)
                                                        {
                                                            if (rightNhanSu)
                                                            {
                                                                <p class="txt-change-data" data-value="@tra2[iTra].Content"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @tra2[iTra].Content</p>
                                                            }
                                                            else
                                                            {
                                                                <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @tra2[iTra].Content</p>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </div>
                                            @if (iTra != 0)
                                            {
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                                </div>
                                            }
                                        </div>
                                        <input type="hidden" class="codeEducation" value="@iTra" />
                                    </div>
                                    iTraNo++;
                                    iTra++;
                                }
                            }


                            if (Model.StatusChange && tra2 != null && tra2.Count > 0 && tra2.Count > tra1.Count)
                            {
                                for (int iTra2 = iTra; iTra2 < tra2.Count; iTra2++)
                                {
                                    <div class="col-12 nodeEducation node">
                                        <div class="row bd-example">
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Nội dung</label>
                                                    <textarea name="Employee.EmployeeEducations[@iTra2].Content" class="form-control form-control-lg js-auto-size"></textarea>
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="txt-change-data" data-value="@tra2[iTra2].Content"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @tra2[iTra2].Content</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @tra2[iTra2].Content</p>
                                                    }
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                            </div>
                                        </div>
                                        <input type="hidden" class="codeEducation" value="@iTra2" />
                                    </div>
                                }
                            }
                        }
                        else
                        {
                            <p>@Constants.MissTitle</p>
                            if (tra2 != null && tra2.Count > 0)
                            {
                                var iTraChange = 0;
                                foreach (var item in tra2)
                                {
                                    <div class="col-12 nodeEducation node">
                                        <div class="row bd-example">
                                            <div class="col-12">
                                                <div class="form-group">
                                                    <label class="control-label">Nội dung</label>
                                                    <textarea name="Employee.Certificates[@iTraChange].Content" class="form-control form-control-lg js-auto-size"></textarea>
                                                    @if (rightNhanSu)
                                                    {
                                                        <p class="txt-change-data" data-value="@item.Content"><small class="badge badge-info"><i class="far fa-check-circle"></i> Xác nhận</small> @item.Content</p>
                                                    }
                                                    else
                                                    {
                                                        <p class="change-data"><small class="badge badge-info">@Constants.CurrentText</small> @item.Content</p>
                                                    }
                                                </div>
                                            </div>
                                            @if (iTraChange != 0)
                                            {
                                                <div class="col-12">
                                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                                </div>
                                            }
                                        </div>
                                        <input type="hidden" class="codeEducation" value="@iTraChange" />
                                    </div>
                                    iTraChange++;
                                }
                            }
                        }
                    }

                    <div class="col-12 p-1 more-education">
                        <div class="form-group">
                            <button class="btn btn-success btn-sm addEducation" type="button"><i class="icon icon-add-to-list"></i> Thêm</button>
                        </div>
                    </div>

                    <script id="tmplEducation" type="text/x-jsrender">
                        <div class="col-12 nodeEducation node">
                            <div class="row bd-example">
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="control-label">Lần {{:code+1}} - Nội dung</label>
                                        <textarea name="Employee.EmployeeEducations[{{:code}}].Content" class="form-control form-control-lg js-auto-size"></textarea>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="button" class="btn btn-danger btn-sm remove-item"><i class="glyphicon-remove"></i>Xóa</button>
                                </div>
                            </div>
                            <input type="hidden" class="codeEducation" value="{{:code}}" />
                        </div>
                    </script>
                </div>


                <!-- DIEU CHUYEN EmployeeMovements -->
                <!-- KHEN THUONG -->
                <!-- KY LUAT -->
                <!-- DANH GIA NANG LUC -->
                <!-- NGUOI LIEN LAC -->
                <!-- GIAY TO KHAC -->
                <!-- NGUOI CHECK -->
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <button class="btn btn-danger btn-lg btn-block btn-submit" id="btn-save-submit" type="submit" data-toggle="tooltip" title="Bấm lưu thay đổi thông tin tài khoản."><i class="icon icon-save"></i> Lưu</button>
                </div>
            </div>
        </div>
    </form>
</div>

<div>
    <a asp-action="Index"><i class="icon icon-back"></i>Trở về</a>
</div>

<div class="modal fade" id="newDepartment" tabindex="-1" role="dialog" aria-labelledby="newDepartmentLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editItemModalLabel">Thêm mới Phòng/ban</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Đóng">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form class="data-form" method="post" action="/@Constants.LinkHr.Main/@Constants.LinkHr.Department/@Constants.ActionLink.Update/" enctype="multipart/form-data">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <span class="result"></span>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label">Phòng/ban</label>
                        <input name="Name" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Mô tả</label>
                        <textarea name="Description" class="form-control form-control-lg js-auto-size"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy & Đóng</button>
                    <button type="button" class="btn btn-primary btn-save-department"><i class="icon-save"></i>&nbsp;Lưu</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="newPart" tabindex="-1" role="dialog" aria-labelledby="newPartLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editItemModalLabel">Thêm mới Bộ phận</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Đóng">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form class="data-form" method="post" action="/@Constants.LinkHr.Main/@Constants.LinkHr.Part/@Constants.ActionLink.Update/" enctype="multipart/form-data">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <span class="result"></span>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label">Bộ phận</label>
                        <input name="Name" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Mô tả</label>
                        <textarea name="Description" class="form-control form-control-lg js-auto-size"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy & Đóng</button>
                    <button type="button" class="btn btn-primary btn-save-part"><i class="icon-save"></i>&nbsp;Lưu</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="newTitle" tabindex="-1" role="dialog" aria-labelledby="newTitleLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editItemModalLabel">Thêm mới Công việc</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Đóng">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form class="data-form" method="post" action="/@Constants.LinkHr.Main/@Constants.LinkHr.Title/@Constants.ActionLink.Update/" enctype="multipart/form-data">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <span class="result"></span>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label">Công việc</label>
                        <input name="Name" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Mô tả</label>
                        <textarea name="Description" class="form-control form-control-lg js-auto-size"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy & Đóng</button>
                    <button type="button" class="btn btn-primary btn-save-title"><i class="icon-save"></i>&nbsp;Lưu</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="newHospital" tabindex="-1" role="dialog" aria-labelledby="newHospitalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editItemModalLabel">Thêm mới Bệnh viện</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Đóng">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form class="data-form" method="post" action="/@Constants.LinkHr.Main/@Constants.LinkHr.Hospital/@Constants.ActionLink.Update/" enctype="multipart/form-data">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <span class="result"></span>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label">Mã KCB</label>
                        <input name="Code" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Tuyến</label>
                        <input name="Local" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Tỉnh/Thành phố</label>
                        <input name="City" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Quận/Huyện</label>
                        <input name="District" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Cơ sở khám chữa bệnh</label>
                        <input name="Name" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Địa chỉ</label>
                        <input name="Address" class="form-control form-control-lg" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Điều kiện</label>
                        <textarea name="Condition" class="form-control form-control-lg js-auto-size"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="control-label">Ghi chú</label>
                        <textarea name="Note" class="form-control form-control-lg js-auto-size"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy & Đóng</button>
                    <button type="button" class="btn btn-primary btn-save-hospital"><i class="icon-save"></i>&nbsp;Lưu</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" id="modalnotice">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-footer">
                <a href="/hr/nhan-su/thong-tin/" class="btn btn-danger">Xem thông tin</a>
                @if (rightHr)
                {
                    <a href="/hr/nhan-su/tao-moi" class="btn btn-primary">Thêm mới</a>
                    <a href="/hr/nhan-su" class="btn btn-info">Danh sách</a>
                }
            </div>
        </div>
    </div>
</div>

<script id="tmplModalNotice" type="text/x-jsrender">
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{:message}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-footer">
        <a href="/hr/nhan-su/thong-tin/{{:id}}" class="btn btn-info">Xem thông tin</a>
        <a href="/hr/nhan-su/tao-moi" class="btn btn-primary">Thêm mới</a>
        <a href="/hr/nhan-su" class="btn btn-cyan">Danh sách</a>
    </div>
</script>

@section scripts {
    @{
        /**/

        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        <script src="~/js/employee-data.js?@DateTime.Now.Ticks"></script>
    }
}

